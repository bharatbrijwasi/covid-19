---
title: "Covid-19 Dashboard "
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    social: menu
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
library(dplyr)
library(DT)
myData <- read.csv("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", na.strings = "", fileEncoding = "UTF-8-BOM") %>%   dplyr::select(Date = dateRep,Year = year ,Cases = cases, Deaths = deaths, Country = countriesAndTerritories)
```



Visualization
=======================================================================
Row
-----------------------------------------------------------------------

### confirmed {.value-box}

```{r}
TotalCases <- myData %>%   dplyr::select(Cases = Cases) %>% sum()
valueBox(TotalCases,caption = "Total Confirmed Cases", color = "purple")
```

### active {.value-box}

```{r}
TotalActive <- myData %>%   dplyr::select(Cases = Cases) %>% sum() -  myData %>%   dplyr::select(Deaths = Deaths) %>% sum()
valueBox(TotalActive, caption = "Active Cases", color = "warning")
```


### death {.value-box}

```{r}
TotalDeaths <- myData %>%   dplyr::select(Deaths = Deaths) %>% sum()
valueBox(TotalDeaths,"Total deaths", color = "red")
```

Row {data-height=300}
-----------------------------------------------------------------------
### chart 1

Row 
-----------------------------------------------------------------------
### chart 2

### CountryNameWise Summary
```{r}
CountryWiseData <- myData %>% group_by(Country) %>%
                   summarise(Confirmed_Cases = sum(Cases), Total_Deaths = sum(Deaths)) 

CountryWiseData %>%
  DT::datatable(rownames = FALSE,
                colnames = c("Country", "Confirmed Case","Total Deaths"),
                options = list(pageLength = nrow(CountryWiseData), dom = 't',order = list(1, desc),
                initComplete = JS("function(settings, json) {",
                "$(this.api().table().header()).css({'background-color': '#000', 'color': '#fff'});",
                "}")))

``` 

Map
=======================================================================

Data
=======================================================================
### Covid-19 All Country Data
```{r}
#these libraries need to be loaded
library(utils)
library(dplyr)
#read the Dataset sheet into “R”. The dataset will be called "data".

read.csv("https://opendata.ecdc.europa.eu/covid19/casedistribution/csv", na.strings = "", fileEncoding = "UTF-8-BOM") %>%   dplyr::select(Date = dateRep,Year = year ,Cases = cases, Deaths = deaths, Country = countriesAndTerritories ) %>%
   DT::datatable(rownames = TRUE, caption = 'This Data Update Automatically Every day',
            options = list(searchHighlight = TRUE, 
                           pageLength = 20), filter = 'top')
```

About Me 
=======================================================================
```{r}
death <- myData %>% group_by(Country) %>% summarise(sumby = sum(Deaths))%>% filter(Country == 'India')
DT::datatable(death)
```